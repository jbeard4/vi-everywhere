<!--
Copyright (C) 2011 Jacob Beard
Released under GNU GPL, read the file 'COPYING' for more information
-->

<scxml 
	xmlns="http://www.w3.org/2005/07/scxml" 
	xmlns:c="http://commons.apache.org/scxml-js"
	xmlns:vi="urn:vi"
	profile="ecmascript" 
	version="1.0" 
	name="viBehaviour" 
	initial="initial_default">

	<datamodel>
		<data id="controller"/>
	</datamodel>

	<script><![CDATA[
		function repeatCommand(fn,count){
			for(var i=0;i<count;i++){
				fn();
			}
		}

		function updateModeText(txt){
			if(In('recording_on')){
				controller.updateModeText(txt + " recording");
			}
			else{
				controller.updateModeText(txt);
			}
		}

	]]></script>

	<state id="initial_default">
		<transition event="init" target="main">
			<assign location="controller" expr="_event.data"/>	
		</transition>
	</state>

	<state id="main" />
</scxml>

